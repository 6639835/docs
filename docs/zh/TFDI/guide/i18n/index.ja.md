# 🚁 TFDI ナビゲーションデータ変換ツール ユーザーガイド

TFDI ナビゲーションデータ変換ツールは、Fenix A320 ナビゲーションデータベースをTFDI MD-11互換のJSON形式に変換するために特別に設計された、プロフェッショナルな航空ナビゲーションデータ変換ツールです。このツールは、モダンなCLIインターフェースと効率的なデータ処理能力を備えています。

## 📖 クイックツアー

### 🎯 主要機能
- **🎨 リッチCLIインターフェース** - モダンなカラーターミナルUI、リアルタイム進行状況表示とステータスフィードバック
- **🔄 完全なデータ変換** - すべてのFenixデータベーステーブルの包括的な変換をサポート
- **📊 スマートデータ処理** - 座標の標準化、列名の正規化、データ整合性検証
- **🔍 FAFポイント検出** - Final Approach Fixポイントをインテリジェントに識別し、アプローチ手順を最適化
- **📦 JSON出力** - TFDI互換の標準JSON形式ファイルを生成
- **🗜️ 自動圧縮** - 配布しやすい7z圧縮パッケージを作成

### ✈️ 対応航空機モデル
- **TFDI MD-11** - Microsoft Flight Simulatorにおける高忠実度 McDonnell Douglas MD-11
- **データソース** - Fenix A320 ナビゲーションデータベース (nd.db3)
- **フォーマットサポート** - SQLiteデータベースからJSON形式への変換

### 📊 データタイプカバー範囲
- **🏢 空港データ** - 空港情報、滑走路データ、通信周波数
- **🧭 航法装置 (Navaid)** - VOR/DME、NDB、ILS装置データ
- **🛣️ 航空路ネットワーク** - 航空路定義、航空路区間、ウェイポイント座標
- **🎯 ターミナルプロシージャ** - SID、STAR、アプローチ手順、出発手順
- **🔗 ルックアップテーブル** - 各種データのインデックスと関連テーブル

## 🚀 クイックスタート

### 1️⃣ システム要件の検証
```bash
# Python バージョンを確認 (3.8+が必要)
python --version

# 利用可能メモリを検証 (4GB+を推奨)
python -c "import psutil; print(f'利用可能メモリ: {psutil.virtual_memory().available//1024**3} GB')"

# ディスク容量を確認 (少なくとも1GBが必要)
python -c "import shutil; print(f'利用可能容量: {shutil.disk_usage(\".\")[2]//1024**3} GB')"
```

### 2️⃣ 必要ファイルの準備
- ✅ **Fenix ナビゲーションデータベース** (`nd.db3`)
  ```
  一般的な場所: %APPDATA%\Microsoft Flight Simulator\Packages\fenix-a320\SimObjects\Airplanes\FenixA320\navdata\nd.db3
  ```
- ✅ **TFDI MD-11** がMSFSにインストールされていること
- ✅ **変換ツールのソースコード** がローカルにダウンロードされていること

### 3️⃣ ワンクリック変換開始
```bash
# 1. 依存関係をインストール
pip install rich pandas py7zr

# 2. 変換ツールを実行
python Fenix2TFDINavDataConverter.py

# 3. 画面の指示に従って操作
# → Fenix データベースのパスを入力
# → ターミナルプロシージャの開始IDを設定
# → 変換完了を待つ
```

## 📚 ドキュメントナビゲーション

### 🚀 基本的な使用方法
1. **[インストールガイド](installation.md)** - 詳細な環境設定と依存関係のインストール
   - Python 環境設定
   - 依存パッケージのインストール
   - システム互換性チェック
   - 一般的なインストール問題の解決

2. **[設定説明](configuration.md)** - 変換ツールの設定オプション詳細
   - ConverterConfig パラメータ
   - データベース接続設定
   - 出力形式設定
   - パフォーマンスチューニングパラメータ

3. **[使用方法](usage.md)** - 完全な操作手順と例
   - 対話型変換プロセス
   - プログラミングによる呼び出し
   - バッチ処理方法
   - 結果検証手順

### 🆘 ヘルプとサポート
- **[よくある質問 (FAQ)](../faq.md)** - ユーザーがよく遭遇する問題とその解決策
- **[トラブルシューティング](../troubleshooting.md)** - 問題診断と解決策

### 🔧 高度な内容
- **[技術アーキテクチャ](../architecture.md)** - システム設計と動作原理
- **[貢献ガイド](../contributing.md)** - 開発参加とコード規約
- **[更新履歴](../changelog.md)** - バージョン履歴と新機能
- **[ライセンス情報](../license.md)** - 利用規約と法的説明

## 🎨 UIプレビュー

### 起動画面
```
╔══════════════════════════════════════════════════════════════╗
║                                                              ║
║           Fenix to TFDI Navigation Data Converter            ║
║     Converting Fenix navigation databases to TFDI-compatible ║
║                        JSON format                           ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝

🔍 環境チェック中...
✅ Python 3.9.16
✅ 依存パッケージ完全
✅ メモリ十分
✅ ディスク容量十分
```

### 変換進行状況
```
╭─────────────────────────────────────────── 📊 標準データテーブルのエクスポート ───────────────────────────────────────────╮
│                                                                                                         │
│ テーブルデータをエクスポート中...                                                                                     │
│                                                                                                         │
│ ████████████████████████████████████████ 8/11 (73%) ⏱️ 0:03:42                                       │
│                                                                                                         │
│ 現在処理中: Terminals テーブル → ターミナルプロシージャデータの変換                                                              │
│ 完了済み: Airports, Runways, Waypoints, Navaids, Airways, AirwayLegs, ILSes                             │
│                                                                                                         │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────╯
```

### 完了概要
```
╔══════════════════════════════════════════════════════════════╗
║                          変換成功                           ║
║                                                              ║
║  ✓ データ変換が正常に完了しました！                                        ║
║                                                              ║
║  📊 処理統計:                                                ║
║  • エクスポートされたテーブル: 11 個                                          ║
║  • 処理されたレコード: 156,789 件                                      ║
║  • ターミナルプロシージャ: 8,945 件                                        ║
║  • ウェイポイント: 45,234 件                                         ║
║                                                              ║
║  📁 出力ファイル: Primary.7z (15.6 MB)                          ║
║  🕒 総所要時間: 4 分 23 秒                                       ║
║                                                              ║
║  このファイルをTFDI MD-11のナビゲーションに使用できます。                    ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
```

## ⚠️ 重要事項

### データ使用ガイドライン
本ツールはフライトシミュレーション目的にのみ使用されます。使用する際は、関連する規定に準拠していることを確認してください：
- **🎯 シミュレーション専用** - 実際の航空航法には厳禁
- **📋 規約の遵守** - FenixおよびTFDIのデータ利用規約を確認
- **🔒 非商業用途** - 個人学習および娯楽用途

### 技術要件
- **🐍 Python 3.8+** - Python 3.9以降のバージョンを推奨
- **💾 メモリ要件** - 少なくとも4GBのRAM（8GBを推奨）
- **💿 ストレージ容量** - 少なくとも1GBの空き容量
- **🖥️ オペレーティングシステム** - Windows 10/11, macOS 10.15+, Linux

### データセキュリティ
- **💾 データバックアップ** - 変換前に重要なデータをバックアップしてください
- **🔍 結果の検証** - 変換後にデータの整合性を検証
- **📅 バージョン管理** - 重要な変換には安定版を使用
- **🔒 ファイル権限** - 十分なファイル読み書き権限があることを確認

## 🎯 適用シナリオ

### 🎮 フライトシミュレーション愛好家
- **✈️ 体験の向上** - TFDI MD-11で高品質なナビゲーションデータを使用
- **🌍 グローバルなカバー範囲** - 世界中の空港と航空路情報を取得
- **📊 リアルデータ** - プロフェッショナルな航空データベースに基づく正確な情報

### 👨‍🏫 航空教育
- **🎓 トレーニング用途** - 航空教育向けに標準化されたデータを提供
- **📚 学習ツール** - 現代の航空ナビゲーションシステムを理解
- **🔄 データ更新** - 定期的な更新でデータの鮮度を維持

### 👨‍💻 開発者
- **🔧 データ処理** - 航空データ変換技術を学習
- **📝 フォーマット研究** - 異なるナビゲーションデータ形式を理解
- **🧩 システム統合** - 変換ツールを他のシステムに統合

## 📊 データ出力説明

### JSONファイル構造
変換完了後、以下のJSONファイルが生成されます：

```
Primary.7z 内容:
├── 📄 AirportLookup.json      # 空港ルックアップインデックス (~500KB)
├── 📄 Airports.json           # 空港基本情報 (~2MB)
├── 📄 AirwayLegs.json        # 航空路区間詳細データ (~3MB)
├── 📄 Airways.json           # 航空路定義 (~800KB)
├── 📄 Ilses.json             # ILSアプローチデータ (~1.5MB)
├── 📄 NavaidLookup.json      # 航法装置ルックアップインデックス (~300KB)
├── 📄 Navaids.json           # 航法装置データ (~1.2MB)
├── 📄 Runways.json           # 滑走路情報 (~2.5MB)
├── 📄 Terminals.json         # ターミナルプロシージャ定義 (~800KB)
├── 📄 WaypointLookup.json    # ウェイポイントルックアップインデックス (~1MB)
├── 📄 Waypoints.json         # ウェイポイントデータ (~4MB)
└── 📁 ProcedureLegs/         # プロシージャレグディレクトリ
    ├── TermID_1.json         # ターミナルプロシージャレグ
    ├── TermID_2.json
    └── ...
```

### データ形式例
```json
// Airports.json 例
{
  "ZBAA": {
    "AirportID": "ZBAA",
    "AirportName": "Beijing Capital International Airport",
    "Latitude": 40.080111,
    "Longitude": 116.584556,
    "Elevation": 116,
    "MagneticVariation": -6.2
  }
}

// Waypoints.json 例
{
  "ELMAG": {
    "WaypointID": "ELMAG",
    "Latitude": 39.832222,
    "Longitude": 116.298611,
    "Type": "DESIGNATED_POINT"
  }
}
```

## 🔄 更新とメンテナンス

### データ更新頻度
- **定期更新**: 28日ごとの更新を推奨（AIRACサイクル）
- **バージョントラッキング**: FenixおよびTFDIのバージョン更新に注目
- **互換性チェック**: 更新前にバージョン互換性を検証

### 変換ツール更新
- **GitHub Releases**: プロジェクトのリリースページに注目
- **自動チェック**: 変換ツールのバージョン更新を定期的に確認
- **機能改善**: コミュニティフィードバックと機能提案に参加

## 🆘 ヘルプの入手

使用中に問題が発生した場合は：

1. **📚 ドキュメントの参照** - まず関連セクションの詳細説明を参照してください
2. **🔍 ログの確認** - 生成されたログファイルでエラーの詳細を確認
3. **🧪 診断の実行** - 内蔵の診断ツールを使用してシステムステータスを確認
4. **💬 コミュニティサポート** - GitHub Issuesで問題を報告

### クイック診断コマンド
```bash
# 変換ツールのバージョンを確認
python Fenix2TFDINavDataConverter.py --version

# 環境を検証
python -c "import rich, pandas, py7zr; print('環境正常')"

# データベース接続をテスト
python -c "import sqlite3; sqlite3.connect('nd.db3').close(); print('データベースにアクセス可能')"
```

### パフォーマンス監視
```python
# システムリソースを監視
import psutil
print(f"CPU: {psutil.cpu_percent()}%")
print(f"メモリ: {psutil.virtual_memory().percent}%")
print(f"ディスク: {psutil.disk_usage('.').percent}%")
```

---

**次のステップ**: [インストールガイド](installation.md)に進み環境設定を開始するか、[使用方法](usage.md)を直接参照して変換プロセスを素早くマスターしてください！🚁✨