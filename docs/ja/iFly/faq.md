# ❓ iFly 航法データ変換ツール よくある質問

## 🔧 インストールと設定

### Q: 変換ツールを実行するために必要なソフトウェアは何ですか？

**A:** 以下のソフトウェアが必要です。
- **Python 3.8+** (Python 3.9以降を推奨)
- Microsoft Flight Simulatorにインストール済みの**iFly 737 MAX 8**
- **Fenix A320** (航法データベースの取得用)
- **NAIP RTE_SEG.csv** 経路区間データファイル

### Q: 必要なPython依存パッケージをインストールする方法を教えてください。

**A:** プロジェクトディレクトリで実行します。
```bash
pip install rich pathlib typing pygeomag pandas tqdm geographiclib
```

または、requirements.txtファイルがある場合：
```bash
pip install -r requirements.txt
```

### Q: プログラムがiFlyのインストールパスを見つけられないと表示された場合はどうすればよいですか？

**A:** 次のことができます。
1.  **パスを手動で指定**：プログラムの指示に従って、完全なiFlyインストールパスを入力します。
2.  **インストール場所を確認**：iFly 737 MAX 8が以下のいずれかの場所に正しくインストールされていることを確認します。
    - `Community\ifly-aircraft-737max8\`
    - `Official\asobo-aircraft-ifly-737max8\`
3.  **iFlyを再インストール**：パスが異常な場合は、iFly 737 MAX 8を再インストールしてください。

## 📊 データ処理

### Q: AIRACサイクルとは何ですか？なぜ重要なのでしょうか？

**A:** AIRAC (Aeronautical Information Regulation and Control) は、国際民間航空機関 (ICAO) が規定する28日間の航空情報更新サイクルです。各サイクルには、ナビゲーションデータの適時性と正確性を保証するために、一意の4桁の識別子（例：2508）があります。

### Q: 磁気偏角はどのように計算されますか？

**A:** 変換ツールは、**pygeomag**ライブラリの**WMM-2025** (World Magnetic Model) 地磁気モデルを使用して、高精度の磁気偏角計算を行います。
-   **ローカル計算**：ネットワーク接続は不要です。
-   **高精度**：小数点以下多数桁まで正確です。
-   **リアルタイム更新**：現在の日付と座標に基づいて更新されます。

### Q: NAIP RTE_SEG.csvファイルが必要なのはなぜですか？

**A:** このファイルには、中国民航の経路区間データが含まれており、以下の目的で使用されます。
-   iFlyに不足している中国の航路情報を補完するため。
-   正確な航路点座標を提供するため。
-   実際の航路ネットワークとの整合性を確保するため。

### Q: 変換されたデータはどこに保存されますか？

**A:** データは以下の場所に配置されます。
-   **航路データ**：`Community\ifly-aircraft-737max8\Data\navdata\Permanent\WPNAVRTE.txt`
-   **ターミナルプロシージャ**：`Community\ifly-aircraft-737max8\Data\navdata\Supplemental\`
-   **AIRAC識別子**：`FMC_Ident.txt`

## 🐛 トラブルシューティング

### Q: プログラムの実行中に「データベース接続失敗」エラーが発生しました。

**A:** 以下を確認してください。
1.  **ファイルパス**：Fenixデータベースファイルのパスが正しいことを確認します。
2.  **ファイル権限**：ファイルが読み取り可能であることを確認します。
3.  **ファイルの整合性**：Fenixデータベースファイルを再度取得してみてください。
4.  **ディスク容量**：十分な空き容量があることを確認します。

### Q: 磁気偏角の計算が遅い場合はどうすればよいですか？

**A:** これは通常、正常です。
-   **初回実行時**：地磁気モデルの初期化に時間がかかります。
-   **大量のデータ**：航路点が多い場合、計算に時間がかかります。
-   **システムパフォーマンス**：古いハードウェアでは処理速度が遅くなります。

最適化の提案：
-   SSDドライブを使用する。
-   十分なメモリを確保する (8GB以上を推奨)。
-   不要なバックグラウンドプログラムを閉じる。

### Q: 変換完了後、iFlyで新しいデータが表示されません。

**A:** 次のことを試してください。
1.  **シミュレーターを再起動**：MSFSを完全に終了し、再起動します。
2.  **ファイル位置を確認**：ファイルが正しいディレクトリに書き込まれていることを確認します。
3.  **キャッシュをクリア**：iFlyのキャッシュファイルを削除します。
4.  **権限を確認**：プログラムがiFlyディレクトリへの書き込み権限を持っていることを確認します。

### Q: エンコードエラーが発生した場合はどうすればよいですか？

**A:** これは通常、文字エンコーディングに関連しています。
1.  **Python環境がUTF-8をサポートしていることを確認**
2.  **CSVファイルのエンコーディングを確認**：UTF-8形式であることを確認します。
3.  **Pythonバージョンを更新**：最新のPythonバージョンを使用します。

## 📈 パフォーマンスと最適化

### Q: 変換速度を向上させるにはどうすればよいですか？

**A:** パフォーマンス最適化の推奨事項：
-   **SSDの使用**：ソリッドステートドライブはI/Oパフォーマンスを大幅に向上させます。
-   **メモリの増設**：8GB以上のRAMを推奨します。
-   **アンチウイルスソフトウェアの無効化**：一時的にリアルタイムスキャンを無効にします。
-   **新しいPythonバージョンの使用**：Python 3.9+はパフォーマンスが向上しています。

### Q: メモリ使用量が高すぎる場合はどうすればよいですか？

**A:** メモリ最適化の解決策：
1.  **バッチ処理**：大きなファイルを処理する際にバッチモードを使用します。
2.  **他のプログラムを閉じる**：システムメモリを解放します。
3.  **データサイズを確認**：データファイルのサイズが適切であることを確認します。
4.  **64ビットPythonを使用**：32ビットのメモリ制限を回避します。

### Q: 複数のデータベースをバッチ処理できますか？

**A:** 現在のバージョンではバッチ処理は直接サポートされていませんが、次のことができます。
1.  **プログラムを複数回実行**：データベースファイルを1つずつ処理します。
2.  **スクリプトの作成**：自動バッチ処理スクリプトを作成します。
3.  **更新を待つ**：v2.1.0でバッチ処理機能がサポートされる予定です。

## 🔄 データ管理

### Q: 元データをバックアップする方法を教えてください。

**A:** 変換前にバックアップすることを強くお勧めします。
```bash
# 备份 iFly 原始数据
cp -r "Community\ifly-aircraft-737max8\Data\navdata" "backup_navdata"
```

### Q: 元データを復元する方法を教えてください。

**A:** 復元する必要がある場合：
1.  **変換後のファイルを削除**
2.  **バックアップから復元**：
    ```bash
    rm -r "Community\ifly-aircraft-737max8\Data\navdata"
    cp -r "backup_navdata" "Community\ifly-aircraft-737max8\Data\navdata"
    ```
3.  **iFlyを再インストール**：最も徹底した復元方法です。

### Q: データ変換が成功したことを検証する方法を教えてください。

**A:** 検証方法：
1.  **ファイルの存在を確認**：新しいファイルが生成されていることを確認します。
2.  **ファイルサイズを確認**：新しいファイルは元のファイルよりも大きいはずです。
3.  **シミュレーターでテスト**：MSFSでiFly 737を読み込んでテストします。
4.  **FMCで検証**：FMCで航路およびプロシージャデータを確認します。

## 🆘 テクニカルサポート

### Q: どこでヘルプを得られますか？

**A:** ヘルプを得るためのチャネル：
1.  **ログを確認**：`converter.log`ファイルを確認します。
2.  **ドキュメントの参照**：完全な使用ガイドを読みます。
3.  **GitHub Issues**：プロジェクトページで問題を報告します。
4.  **コミュニティフォーラム**：フライトシミュレーションコミュニティの議論に参加します。

### Q: バグを報告する方法を教えてください。

**A:** 問題を報告する際は、以下を提供してください。
-   **詳細なエラー説明**
-   **完全なエラーログ**
-   **システム環境情報** (OS、Pythonバージョンなど)
-   **再現手順**
-   **関連するスクリーンショットまたはファイル**

### Q: プロジェクトはオープンソースですか？

**A:** はい！プロジェクトはオープンソースライセンスに従っています。
-   **ソースコードを表示**：GitHubリポジトリは公開されています。
-   **コードを貢献**：プルリクエストの提出を歓迎します。
-   **機能の提案**：Issuesで機能リクエストを提出します。
-   **ドキュメントの改善**：ドキュメントの完成を支援します。

## 🔮 今後の機能

### Q: どのような新機能が追加される予定ですか？

**A:** 近日公開予定の機能：
-   **GUIインターフェース** (v2.1.0)
-   **バッチ処理** (v2.1.0)
-   **データ検証ツール** (v2.2.0)
-   **クラウド処理** (v3.0.0)
-   **複数形式のサポート** (v3.0.0)

### Q: バージョン更新を取得するにはどうすればよいですか？

**A:** 更新を維持するには：
1.  **GitHubをフォロー**：プロジェクトをStarして更新通知を受け取ります。
2.  **リリースを購読**：リリース通知を有効にします。
3.  **定期的に確認**：月に一度、新しいバージョンを確認します。
4.  **自動更新**：将来のバージョンでは自動更新がサポートされます。

---

**お探しの質問の答えが見つかりませんか？** [トラブルシューティングガイド](troubleshooting.md) を参照するか、GitHub Issues で質問してください！🆘
